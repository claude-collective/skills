# yaml-language-server: $schema=./schemas/registry.schema.json
# Single source of truth for all agent and skill definitions
# Profile configs reference these by name/ID and add profile-specific prompts and skill assignments

# =============================================================================
# Agent Definitions
# =============================================================================
# Each agent defines: title, description, model, tools, output_format
# Profile configs add: core_prompts, ending_prompts, precompiled skills, dynamic skills

agents:
  frontend-developer:
    title: Frontend Developer Agent
    description: Implements frontend features from detailed specs - React components, TypeScript, styling, client state - surgical execution following existing patterns - invoke AFTER pm creates spec
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-developer

  backend-developer:
    title: Backend Developer Agent
    description: Implements backend features from detailed specs - API routes, database operations, server utilities, authentication, middleware - surgical execution following existing patterns - invoke AFTER pm creates spec
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-developer

  frontend-reviewer:
    title: Frontend Reviewer Agent
    description: Reviews React code ONLY (*.tsx/*.jsx with JSX) - components, hooks, props, state, performance, a11y patterns - NOT for API routes, configs, or server code (use backend-reviewer)
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-reviewer

  backend-reviewer:
    title: Backend Reviewer Agent
    description: Reviews non-React code - API routes, server utils, configs (*.config.*), build tooling, CI/CD (*.yml), security, env management - defers *.tsx React components to frontend-reviewer
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-reviewer

  tester:
    title: Tester Agent
    description: Writes tests BEFORE implementation - all test types (*.test.*, *.spec.*, E2E) - Tester red-green-refactor - invoke BEFORE developer implements feature
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-tester

  pm:
    title: PM and Architect Agent
    description: Creates detailed implementation specs by researching codebase patterns - architectural planning and requirements gathering - invoke BEFORE developer for any new feature
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-pm

  skill-summoner:
    title: Skill Summoner Agent
    description: Creates technology-specific skills by researching best practices and comparing with codebase standards - use for MobX, Tailwind, Hono, and other technology skills
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - WebSearch
      - WebFetch
    output_format: output-formats-developer

  agent-summoner:
    title: Agent Summoner Agent
    description: Expert in creating agents and skills - understands agent architecture deeply - invoke when you need to create, improve, or analyze agents/skills
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-developer

  pattern-scout:
    title: Pattern Scout Agent
    description: Extracts ALL patterns from monorepo (15+ categories - code, architecture, testing, design, build, CI/CD, env, security) - creates comprehensive standards - invoke for new codebases
    model: opus
    tools:
      - Read
      - Grep
      - Glob
      - Bash
    output_format: output-formats-developer

  pattern-critique:
    title: Pattern Critique Agent
    description: Critiques extracted patterns against industry standards (Airbnb, Stripe, Meta, Vercel) - frontend/React architecture focus - invoke AFTER pattern-scout extracts patterns
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-critique

  documentor:
    title: Documentor Agent
    description: Creates AI-focused documentation that helps other agents understand where and how to implement features. Works incrementally, tracking progress over time.
    model: opus
    tools:
      - Read
      - Write
      - Glob
      - Grep
      - Bash
    output_format: output-formats-documentor

  architecture:
    title: Architecture Agent
    description: Scaffolds new applications in the monorepo with all foundational patterns (Next.js, Better Auth, Drizzle, Hono, PostHog, Pino/Sentry/Axiom, GitHub Actions)
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
    output_format: output-formats-developer

  orchestrator:
    title: Orchestrator Agent
    description: Manages background agent execution - stays responsive while agents work, tracks state via dashboard, injects boilerplate automatically - use for multi-task coordination
    model: opus
    tools:
      - Read
      - Write
      - Edit
      - Grep
      - Glob
      - Bash
      - Task
      - TaskOutput
    output_format: output-formats-orchestrator

  frontend-researcher:
    title: Frontend Researcher Agent
    description: Read-only frontend research specialist - discovers React patterns, catalogs UI components, understands design systems and styling (SCSS Modules, cva, tokens), finds similar component implementations - produces structured findings for frontend-developer - invoke for frontend research before implementation
    model: opus
    tools:
      - Read
      - Grep
      - Glob
      - Bash
    output_format: output-formats-researcher

  backend-researcher:
    title: Backend Researcher Agent
    description: Read-only backend research specialist - discovers API route patterns, understands database schemas and ORM patterns, catalogs middleware and authentication flows, finds similar service implementations - produces structured findings for backend-developer - invoke for backend research before implementation
    model: opus
    tools:
      - Read
      - Grep
      - Glob
      - Bash
    output_format: output-formats-researcher

# =============================================================================
# Skill Definitions
# =============================================================================
# Naming convention: category/technology-name (@publisher)
# Skills organized in subdirectories: frontend/, backend/, security/, setup/, shared/, research/
# Each skill defines: path, name, description
# Profile configs add: usage (context-specific description of when to use)

skills:
  # ---------------------------------------------------------------------------
  # Frontend Skills
  # ---------------------------------------------------------------------------
  # @vince - Modern React Stack (SCSS Modules, Zustand, React Query)
  frontend/react (@vince):
    path: skills/frontend/react/react (@vince)/
    name: React
    description: Component architecture, hooks, patterns

  frontend/scss-modules (@vince):
    path: skills/frontend/styling/scss-modules (@vince)/
    name: SCSS Modules
    description: SCSS Modules, cva, design tokens

  frontend/react-query (@vince):
    path: skills/frontend/server-state-management/react-query (@vince)/
    name: React Query
    description: REST APIs, React Query, data fetching

  frontend/zustand (@vince):
    path: skills/frontend/client-state-management/zustand (@vince)/
    name: Zustand
    description: Zustand stores, React Query integration

  frontend/accessibility (@vince):
    path: skills/frontend/accessibility/accessibility (@vince)/
    name: Accessibility
    description: WCAG, ARIA, keyboard navigation

  frontend/performance (@vince):
    path: skills/frontend/performance/performance (@vince)/
    name: Frontend Performance
    description: Bundle optimization, render performance

  frontend/vitest (@vince):
    path: skills/frontend/testing/vitest (@vince)/
    name: Vitest
    description: Playwright E2E, Vitest, React Testing Library

  frontend/msw (@vince):
    path: skills/frontend/mocks/msw (@vince)/
    name: MSW
    description: MSW handlers, browser/server workers, test data

  # @photoroom - Photoroom Webapp Stack (Tailwind, MobX, React Query + MobX)
  frontend/react-mobx (@photoroom):
    path: skills/frontend/react/mobx (@photoroom)/
    name: React + MobX
    description: MobX observer, stores, i18n for Photoroom webapp

  frontend/tailwind (@photoroom):
    path: skills/frontend/styling/tailwind (@photoroom)/
    name: Tailwind CSS
    description: Tailwind CSS, clsx, design tokens for Photoroom webapp

  frontend/mobx (@photoroom):
    path: skills/frontend/client-state-management/mobx (@photoroom)/
    name: MobX
    description: MobX stores, RootStore pattern for Photoroom webapp

  frontend/react-query-mobx (@photoroom):
    path: skills/frontend/server-state-management/react-query (@photoroom)/
    name: React Query + MobX
    description: React Query, Axios, API classes for Photoroom webapp

  # ---------------------------------------------------------------------------
  # Backend Skills
  # ---------------------------------------------------------------------------
  backend/hono (@vince):
    path: skills/backend/api/hono (@vince)/
    name: Hono
    description: Hono routes, OpenAPI, Zod validation

  backend/better-auth (@vince):
    path: skills/backend/auth/better-auth (@vince)/
    name: Better Auth
    description: Better Auth patterns, sessions, OAuth

  backend/drizzle (@vince):
    path: skills/backend/database/drizzle (@vince)/
    name: Drizzle
    description: Drizzle ORM, queries, migrations

  backend/github-actions (@vince):
    path: skills/backend/ci-cd/github-actions (@vince)/
    name: GitHub Actions
    description: GitHub Actions, pipelines, deployment

  backend/performance (@vince):
    path: skills/backend/performance/performance (@vince)/
    name: Backend Performance
    description: Query optimization, caching, indexing

  backend/testing (@vince):
    path: skills/backend/testing/testing (@vince)/
    name: Backend Testing
    description: API tests, integration tests

  backend/posthog-analytics (@vince):
    path: skills/backend/analytics/posthog-analytics (@vince)/
    name: PostHog Analytics
    description: PostHog event tracking, user identification

  backend/posthog-flags (@vince):
    path: skills/backend/feature-flags/posthog-flags (@vince)/
    name: PostHog Flags
    description: PostHog feature flags, rollouts, A/B testing

  backend/resend (@vince):
    path: skills/backend/email/resend (@vince)/
    name: Resend
    description: Resend + React Email templates

  backend/observability (@vince):
    path: skills/backend/observability/observability (@vince)/
    name: Observability
    description: Pino logging, Sentry error tracking, Axiom

  # ---------------------------------------------------------------------------
  # Security Skills
  # ---------------------------------------------------------------------------
  security/security (@vince):
    path: skills/security/security (@vince)/
    name: Security
    description: Authentication, authorization, secrets

  # ---------------------------------------------------------------------------
  # Setup Skills
  # ---------------------------------------------------------------------------
  setup/turborepo (@vince):
    path: skills/setup/monorepo/turborepo (@vince)/
    name: Turborepo
    description: Turborepo, workspaces, package architecture

  setup/package (@vince):
    path: skills/setup/monorepo/package/package (@vince)/
    name: Package
    description: Internal package conventions, exports

  setup/env (@vince):
    path: skills/setup/env/env (@vince)/
    name: Environment
    description: Environment configuration, Zod validation

  setup/tooling (@vince):
    path: skills/setup/tooling/tooling (@vince)/
    name: Tooling
    description: ESLint, Prettier, TypeScript configuration

  setup/posthog-setup (@vince):
    path: skills/setup/analytics/posthog-setup (@vince)/
    name: PostHog Setup
    description: PostHog analytics and feature flags setup

  setup/resend-setup (@vince):
    path: skills/setup/email/resend-setup (@vince)/
    name: Resend Setup
    description: Resend email setup, domain verification

  setup/observability-setup (@vince):
    path: skills/setup/observability/observability-setup (@vince)/
    name: Observability Setup
    description: Pino, Axiom, Sentry installation

  # ---------------------------------------------------------------------------
  # Shared Skills
  # ---------------------------------------------------------------------------
  shared/reviewing (@vince):
    path: skills/shared/reviewing (@vince)/
    name: Reviewing
    description: Code review patterns, feedback principles

  # ---------------------------------------------------------------------------
  # Research Skills
  # ---------------------------------------------------------------------------
  research/research-methodology (@vince):
    path: skills/research/research-methodology/research-methodology (@vince)/
    name: Research Methodology
    description: Investigation flow, evidence-based research, structured output
